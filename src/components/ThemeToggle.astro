---
import Sun from "@icons/Sun.astro";
import Moon from "@icons/Moon.astro";
---

<button
  id="themeToggle"
  aria-label="Theme toggle">
  <Sun />
  <Moon />
</button>

<script is:inline>
  if (!document.getElementById("themeToggle").dataset.hasClickListener) {
    let toggleBtn = document.getElementById("themeToggle");
    const handleToggleClick = () => {
      const element = document.documentElement;
      element.classList.toggle("dark");

      const isDark = element.classList.contains("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
    };

    toggleBtn.addEventListener("click", handleToggleClick);
    toggleBtn.dataset.hasClickListener = "true";
  }
</script>
